<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //布尔值 = Array.isArray(被检测的数组);判断是否为数组
        //字符串 = 数组.toString();数组转换为字符串
        //Array.from()：将伪数组转换为真数组
        // array = Array.from(arrayLike);
        const name = 'ssy';
        console.log(Array.from(name)); // 打印结果是数组：["s","s","y"]

        //Array.of()：创建数组  根据参数里的内容，创建数组。
        const arr01 = Array.of(1, 'abc', true);
        console.log(arr01); // 打印结果是数组：[1, "abc", true]
        //new Array()和 Array.of()的区别在于：当参数只有一个时，前者表示数组的长度，后者表示数组中的内容。

        //新数组的长度 = 数组.push(元素); 向数组的最后面插入一个或多个元素
        var arr02 = ['王一', '王二', '王三'];
        var result1 = arr02.push('王四'); // 末尾插入一个元素
        var result2 = arr02.push('王五', '王六'); // 末尾插入多个元素

        console.log(result1); // 打印结果：4
        console.log(result2); // 打印结果：6
        console.log(JSON.stringify(arr02)); // 打印结果：["王一","王二","王三","王四","王五","王六"]

        //被删除的元素 = 数组.pop(); 删除数组中的最后一个元素
        var arr03 = ['王一', '王二', '王三'];
        var result1 = arr03.pop();
        console.log(result1); // 打印结果：王三
        console.log(JSON.stringify(arr03)); // 打印结果：["王一","王二"]

        //新数组的长度 = 数组.unshift(元素); 在数组最前面插入一个或多个元素
        var arr04 = ['王一', '王二', '王三'];
        var result1 = arr04.unshift('王四'); // 最前面插入一个元素
        var result2 = arr04.unshift('王五', '王六'); // 最前面插入多个元素
        console.log(result1); // 打印结果：4
        console.log(result2); // 打印结果：6
        console.log(JSON.stringify(arr04)); // 打印结果：["王五","王六","王四","王一","王二","王三"]

        //被删除的元素 = 数组.shift(); 删除数组中的第一个元素
        var arr05 = ['王一', '王二', '王三'];
        var result01 = arr05.shift();
        console.log(result1); // 打印结果：王一
        console.log(JSON.stringify(arr05)); // 打印结果：["王二","王三"]

        //新数组 = 原数组.slice(开始位置的索引, 结束位置的索引); //包含开始索引，不包含结束索引 从数组中提取指定的一个或者多个元素
        const arr6 = ['a', 'b', 'c', 'd', 'e', 'f'];
        const result001 = arr6.slice(); // 不加参数时，则获取所有的元素。相当于数组的整体赋值
        const result002 = arr6.slice(2); // 从第二个值开始提取，直到末尾
        const result003 = arr6.slice(-2); // 提取最后两个元素
        const result004 = arr6.slice(2, 4); // 提取从第二个到第四个之间的元素（不包括第四个元素）
        const result005 = arr6.slice(4, 2); // 空

        console.log('arr6:' + JSON.stringify(arr6));
        console.log('result1:' + JSON.stringify(result001));
        console.log('result2:' + JSON.stringify(result002));
        console.log('result3:' + JSON.stringify(result003));
        console.log('result4:' + JSON.stringify(result004));
        console.log('result5:' + JSON.stringify(result005));

        //前端开发会用 slice()将伪数组，转化为真数组。
        // 方式1
        // array = Array.prototype.slice.call(arrayLike);
        // // 方式2
        // array = [].slice.call(arrayLike);
        // ES6 出了新的 API（专门用来将伪数组转化成真数组）
        // array = Array.from(arrayLike);

        //新数组 = 原数组.splice(起始索引index, 需要删除的个数);
        //新数组 = 原数组.splice(起始索引index, 需要删除的个数, 新的元素1, 新的元素2...);
        //第三个及之后的参数，表示：删除元素之后，向原数组中添加新的元素
        var arr1 = ['a', 'b', 'c', 'd', 'e', 'f'];
        var result1 = arr1.splice(1); //从第index为1的位置开始，删除元素
        console.log('arr1：' + JSON.stringify(arr1));
        console.log('result1：' + JSON.stringify(result1));

        var arr2 = ['a', 'b', 'c', 'd', 'e', 'f'];
        var result2 = arr2.splice(-2); //删除最后两个元素
        console.log('arr2：' + JSON.stringify(arr2));
        console.log('result2：' + JSON.stringify(result2));

        var arr3 = ['a', 'b', 'c', 'd', 'e', 'f'];
        var result3 = arr3.splice(1, 3); //从第index为1的位置开始删除元素,一共删除三个元素
        console.log('arr3：' + JSON.stringify(arr3));
        console.log('result3：' + JSON.stringify(result3));

        var arr4 = ['a', 'b', 'c', 'd', 'e', 'f'];
        //从第index为1的位置开始删除元素,一共删除三个元素。并且在 index=1 的前面追加两个元素
        var result4 = arr4.splice(1, 3, '千古壹号', 'vae');
        console.log('arr4：' + JSON.stringify(arr4));
        console.log('result4：' + JSON.stringify(result4));


        //fill()用一个固定值填充数组，返回结果为新的数组。不会改变原数组。
        // 用一个固定值填充数组。数组里的每个元素都会被这个固定值填充
        // 新数组 = 数组.fill(固定值);
        // // 从 startIndex 开始的数组元素，用固定值填充
        // 新数组 = 数组.fill(固定值, startIndex);
        // // 从 startIndex 到 endIndex 之间的元素（包左不包右），用固定值填充
        // 新数组 = 数组.fill(固定值, startIndex, endIndex);
        // 创建一个长度为4的空数组，然后用 'f' 来填充这个空数组
        console.log(Array(4).fill('f')); // ['f', 'f', 'f,' 'f']
        // 将现有数组的每一个元素都进行填充
        console.log(['a', 'b', 'c', 'd'].fill('f')); // ['f', 'f', 'f,' 'f']
        // 指定位置进行填充
        console.log(['a', 'b', 'c', 'd'].fill('f', 1, 3)); // ["a", "f", "f", "d"]


        // 新数组 = 数组1.concat(数组2, 数组3 ...);
        //连接两个或多个数组，返回结果为新的数组
        const arr1 = [1, 2, 3]
        const arr2 = ['a', 'b', 'c']
        const arr3 = ['松山院', 'hello']
        const result1 = arr1.concat(arr2)
        const result2 = arr2.concat(arr1, arr3)
        console.log('arr1 =' + JSON.stringify(arr1))
        console.log('arr2 =' + JSON.stringify(arr2))
        console.log('arr3 =' + JSON.stringify(arr3))
        console.log('result1 =' + JSON.stringify(result1))
        console.log('result2 =' + JSON.stringify(result2))
        //还使用...这种展开语法，将两个数组进行合并
        const arr1 = [1, 2, 3];
        const result = ['a', 'b', 'c', ...arr1];
        console.log(JSON.stringify(result)); // 打印结果：["a","b","c",1,2,3]

        //新的字符串 = 原数组.join(参数); // 参数选填 
        //将数组转换为字符串，返回结果为转换后的字符串
        //指定一个字符串作为参数，这个字符串将会成为数组中元素的连接符；如果不指定连接符，则默认使用
        var arr00 = ['a', 'b', 'c'];
        var results1 = arr00.join(); // 这里没有指定连接符，所以默认使用 , 作为连接符
        var results2 = arr00.join('-'); // 使用指定的字符串作为连接符
        console.log(typeof arr00); // 打印结果：object
        console.log(typeof result1); // 打印结果：string
        console.log('arr =' + JSON.stringify(arr00));
        console.log('result1 =' + JSON.stringify(results1));
        console.log('result2 =' + JSON.stringify(results2));

        //反转后的数组 = 数组.reverse();
        var arr = ['a', 'b', 'c', 'd', 'e', 'f'];
        var result = arr.reverse(); // 将数组 arr 进行反转
        console.log('arr =' + JSON.stringify(arr));
        console.log('result =' + JSON.stringify(result));

        //如果在使用 sort() 方法时不带参，则默认按照Unicode 编码，从小到大进行排序。
        //当数组中的元素为字符串时
        let arr1 = ['e', 'b', 'd', 'a', 'f', 'c'];
        let result = arr1.sort(); // 将数组 arr1 进行排序
        console.log('arr1 =' + JSON.stringify(arr1));
        console.log('result =' + JSON.stringify(result));
        //当数组中的元素为数字时
        let arr2 = [5, 2, 11, 3, 4, 1]
        let result = arr2.sort() // 将数组 arr2 进行排序
        console.log('arr2 =' + JSON.stringify(arr2))
        console.log('result =' + JSON.stringify(result))
        //sort()方法：带参时，自定义排序规则 可以在 sort()添加一个回调函数，来指定排序规则。回调函数中需要定义两个形参，浏览器将会分别使用数组中的元素作为实参去调用回调函数。
        // 浏览器根据回调函数的返回值来决定元素的排序：（重要）
        // 如果返回一个大于 0 的值，则元素会交换位置
        // 如果返回一个小于 0 的值，则元素位置不变
        // 如果返回一个等于 0 的值，则认为两个元素相等，则不交换位置
        ///将数组中的数字按照从小到大排序
        var arr = [5, 2, 11, 3, 4, 1];
        // 自定义排序规则
        var result = arr.sort(function (a, b) {
            if (a > b) {
                // 如果 a 大于 b，则交换 a 和 b 的位置
                return 1;
            } else if (a < b) {
                // 如果 a 小于 b，则位置不变
                return -1;
            } else {
                // 如果 a 等于 b，则位置不变
                return 0;
            }
        });
        console.log('arr =' + JSON.stringify(arr));
        console.log('result =' + JSON.stringify(result));

        //冒泡排序
        let arr = [5, 2, 11, 3, 4, 1];
        // 自定义排序规则
        let result = arr.sort(function (a, b) {
            return a - b; // 升序排列
            // return b - a; // 降序排列
        });
        console.log('arr =' + JSON.stringify(arr));
        console.log('result =' + JSON.stringify(result));

        //箭头函数
        let arr = [5, 2, 11, 3, 4, 1];
        // 自定义排序规则
        let result = arr.sort((a, b) => {
            return a - b; // 升序排列
        });
        console.log('arr =' + JSON.stringify(arr));
        console.log('result =' + JSON.stringify(result));

        //因为函数体内只有一句话，所以可以去掉 return 语句
        let arr = [5, 2, 11, 3, 4, 1];
        // 自定义排序规则：升序排列
        let result = arr.sort((a, b) => a - b);
        console.log('arr =' + JSON.stringify(arr));
        console.log('result =' + JSON.stringify(result));

        //indexOf() 和 lastIndexOf()：获取数据的索引
        //索引值 = 数组.indexOf(想要查询的元素);
        // 索引值 = 数组.lastIndexOf(想要查询的元素);
        //可以检索一个数组中是否含有指定的元素。如果数组中含有该元素，则会返回其第一次出现的索引；如果没有找到指定的内容，则返回 -1。
        var arr = ['a', 'b', 'c', 'd', 'e', 'd', 'c'];
        console.log(arr.indexOf('c')); //从前往后，找第一个"c"在哪个位置 
        console.log(arr.lastIndexOf('d')); //从后往前，找第一个"d"在哪个位置

        let arr = ['1', '2', '3', '4', '5'];
        console.log(arr.indexOf(2));
        //还可以指定第二个参数，用来指定查找的起始位置
        let arr = ['s', 'o', 'n', 'g', 's', 'h', 'a', 'n', 'y', 'u', 'a', 'n'];
        result = str.indexOf('a', 3); // 从第三个位置开始查找 'a'这个元素 【重要】
        console.log(result); // 打印结果：9

        //布尔值 = arr.includes(想要查找的元素, [position]); 判断一个数组中是否包含指定的元素
        const arr = [11, 12, 13, 14, 15];
        console.log(arr.includes(12)); // 打印结果：true
        console.log(arr.includes(20)); // 打印结果：false
        console.log(arr.includes(11, 1)); // 打印结果：false

        //找出第一个满足「指定条件返回 true」的元素；如果没找到，则返回 undefined。一旦找到符合条件的第一个元素，将不再继续往下遍历。
        let arr = [2, 3, 2, 5, 7, 6];
        let result = arr.find((item, index) => {
            return item > 4; //遍历数组arr，一旦发现有第一个元素大于4，就把这个元素返回
        });
        console.log(result); //打印结果：5

        //findIndex() 找出第一个满足「指定条件返回 true」的元素的 index。
        let arr = [2, 3, 2, 5, 7, 6];
        let result = arr.findIndex((item, index) => {
            return item > 4; //遍历数组arr，一旦发现有第一个元素大于4，就把这个元素的index返回
        });
        console.log(result); //打印结果：3

        //every() 对数组中每一项运行回调函数，如果都返回 true，every 就返回 true；如果有一项返回 false，则停止遍历，此方法返回 false
        var arr1 = ['Java', 'JavaScript', 'CSS', 'HTML'];
        var bool1 = arr1.every(function (element, index, array) {
            if (element.length > 2) {
                return false;
            }
            return true;
        });
        console.log(bool1); //输出结果：false。只要有一个元素的长度是超过两个字符的，就返回false

        var arr2 = ['aa', 'bb', 'cc', 'dd'];
        var bool2 = arr2.every(function (element, index, array) {
            if (element.length > 2) {
                return false;
            }
            return true;
        });
        console.log(bool2); //输出结果：true。因为每个元素的长度都是两个字符。

        //some()对数组中每一个元素运行回调函数，只要有一个元素返回 true，则停止遍历，此方法返回 true。


        const arr = ['松山院', '好好学习', '天天向上'];
        for (let i = 0; i < arr.length; i++) {
            console.log(arr[i]); // arr[i]代表的是数组中的每一个元素i
        }
        console.log(JSON.stringify(arr));

        //forEach() 遍历 
        // 回调函数中传递三个参数：第一个参数，就是当前正在遍历的元素 第二个参数，就是当前正在遍历的元素的索引
        // 第三个参数，就是正在遍历的数组
        let myArr = ['王一', '王二', '王三']
        myArr.forEach((item, index, arr) => {
            console.log('item:' + item)
            console.log('index:' + index)
            console.log('arr:' + JSON.stringify(arr))
            console.log('----------')
        })
        //数组的元素是基本数据类型：（无法改变原数组）
        let numArr = [1, 2, 3];
        numArr.forEach((item) => {
            item = item * 2;
        });
        console.log(JSON.stringify(numArr)); // 打印结果：[1, 2, 3]
        //数组的元素是引用数据类型：（直接修改整个元素对象时，无法改变原数组）
        let objArr = [
            { name: '松山院', age: 20 },
            { name: '达摩院', age: 30 },
        ];

        objArr.forEach((item) => {
            item = {
                name: '张三',
                age: '29',
            };
        });
        console.log(JSON.stringify(objArr)); // 打印结果：[{"name":"松山院","age":20},{"name":"达摩院","age":30}]
        //数组的元素是引用数据类型：（修改元素对象里的某个属性时，可以改变原数组）
        let objArr = [
            { name: '松山院', age: 28 },
            { name: '达摩院', age: 30 },
        ];

        objArr.forEach((item) => {
            item.name = '张三';
        });
        console.log(JSON.stringify(objArr)); // 打印结果：[{"name":"张三","age":28},{"name":"张三","age":30}]
        //forEach() 通过参数 2、参数 3 修改原数组：（标准做法）
        // 1、数组的元素是基本数据类型
        let numArr = [1, 2, 3];
        numArr.forEach((item, index, arr) => {
            arr[index] = arr[index] * 2;
        });
        console.log(JSON.stringify(numArr)); // 打印结果：[2,4,6]

        // 2、数组的元素是引用数据类型时，直接修改对象
        let objArr = [
            { name: '松山院', age: 28 },
            { name: '张三', age: 34 },
        ];
        objArr.forEach((item, index, arr) => {
            arr[index] = {
                name: '小明',
                age: '10',
            };
        });
        console.log(JSON.stringify(objArr)); // 打印结果：[{"name":"小明","age":"10"},{"name":"小明","age":"10"}]

        // 3、数组的元素是引用数据类型时，修改对象的某个属性
        let objArr2 = [
            { name: '松山院', age: 28 },
            { name: '张三', age: 34 },
        ];

        objArr2.forEach((item, index, arr) => {
            arr[index].name = '小明';
        });
        console.log(JSON.stringify(objArr2)); // 打印结果：[{"name":"小明","age":28},{"name":"小明","age":34}]


        //map()方法 对数组中每一项运行回调函数，返回该函数的结果，组成的新数组
        //拷贝的过程中改变数组元素的值
        var arr1 = [1, 3, 6, 2, 5, 6];
        var arr2 = arr1.map(function (item, index) {
            return item + 10; //让arr1中的每个元素加10
        });
        console.log(arr2);

        //将 A 数组中某个属性的值，存储到 B 数组中
        const arr1 = [
            { name: '松山院', age: '20' },
            { name: '张三', age: '32' },
        ];

        // 将数组 arr1 中的 name 属性，存储到 数组 arr2 中
        const arr2 = arr1.map((item) => item.name);

        // 将数组 arr1 中的 name、age这两个属性，改一下“键”的名字，存储到 arr3中
        const arr3 = arr1.map((item) => ({
            myName: item.name,
            myAge: item.age,
        })); // 将数组 arr1 中的 name 属性，存储到 数组 arr2 中

        console.log('arr1:' + JSON.stringify(arr1));
        console.log('arr2:' + JSON.stringify(arr2));
        console.log('arr3:' + JSON.stringify(arr3));
        //map方法如果是修改整个item的值，则不会改变原数组。但如果是修改 item 里面的某个属性，那就会改变原数组。
        const arr = [
            {
                name: "ssy1",
                age: 22,
            },
            {
                name: "ssy2",
                age: 23,
            },
        ];

        arr.map((item) => {
            item.name = "hello"; // 修改 item 里的某个属性
            return item;
        });
        console.log(JSON.stringify(arr));


        //filter() 对数组中的每一项运行回调函数，该函数返回结果是 true 的项，将组成新的数组（返回值就是这个新的数组）
        //找出数组 arr1 中大于 4 的元素，返回一个新的数组。 
        let arr1 = [1, 3, 6, 2, 5, 6];
        let arr2 = arr1.filter((item) => {
            if (item > 4) {
                return true; // 将arr1中大于4的元素返回，组成新的数组
            }
            return false;
        });
        console.log(JSON.stringify(arr1)); // 打印结果：[1,3,6,2,5,6]
        console.log(JSON.stringify(arr2)); // 打印结果：[6,5,6]

        //更简洁的写法
        let arr1 = [1, 3, 6, 2, 5, 6];
        let arr2 = arr1.filter((item) => item > 4); // 将arr1中大于4的元素返回，组成新的数组
        console.log(JSON.stringify(arr1)); // 打印结果：[1,3,6,2,5,6]
        console.log(JSON.stringify(arr2)); // 打印结果：[6,5,6]

        //获取数组 A 中指定类型的对象，放到数组 B 中。
        const arr1 = [
            { name: '陈奕迅', type: '男星' },
            { name: '王菲', type: '女星' },
            { name: '邓紫棋', type: '女星' },
            { name: '周杰伦', type: '男星' },
            { name: '黄渤', type: '男星' },
            { name: '周迅', type: '女星' },
        ]
        const arr2 = arr1.filter((item) => item.type == '女星') // 筛选出女星
        console.log(JSON.stringify(arr2))

        //reduce()方法 接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。返回值是回调函数累计处理的结
        // arr.reduce(function (previousValue, currentValue, currentIndex, arr) {}, initialValue);
        // ● previousValue：必填，上一次调用回调函数时的返回值
        // ● currentValue：必填，当前正在处理的数组元素
        // ● currentIndex：选填，当前正在处理的数组元素下标
        // ● arr：选填，调用 reduce()方法的数组
        // ● initialValue：选填，可选的初始值（作为第一次调用回调函数时传给 previousValue 的值）
        let arr1 = [1, 2, 3, 4, 5, 6]
        arr1.reduce((prev, item) => {
            console.log(prev)
            console.log(item)
            console.log('------')
            return 88
        }, 0)

        //计算数组中所有元素项的总和
        const arr = [2, 0, 1, 9, 6];
        // 数组求和
        const total = arr.reduce((prev, item) => {
            return prev + item;
        });

        console.log('total:' + total); // 打印结果：18

        //统计某个元素出现的次数
        // 定义方法：统一 value 这个元素在数组 arr 中出现的次数
        function repeatCount(arr, value) {
            if (!arr || arr.length == 0) return 0;

            return arr.reduce((totalCount, item) => {
                totalCount += item == value ? 1 : 0;
                return totalCount;
            }, 0);
        }

        let arr1 = [1, 2, 6, 5, 6, 1, 6];
        console.log(repeatCount(arr1, 6)); // 打印结果：3

        //求元素的最大值
        const arr2 = [2, 0, 1, 9, 6]
        // 数组求最大值
        const maxValue = arr2.reduce((prev, item) => {
            return prev > item ? prev : item
        })

        console.log(maxValue) // 打印结果：9
    </script>

</body>

</html>